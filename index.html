<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lado C - Una mirada distinta sobre la pol√≠tica</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Montserrat:wght@600;700&family=Merriweather:wght@400;700&family=Lora:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* [TODO EL CSS PERMANECE IGUAL - ES MUY LARGO Y NO CABE AQU√ç] */
        /* SE MANTIENE EL MISMO CSS DE LA VERSI√ìN ANTERIOR */
    </style>
</head>
<body>
    <!-- [TODO EL HTML PERMANECE IGUAL - ES MUY LARGO Y NO CABE AQU√ç] -->
    <!-- SE MANTIENE EL MISMO HTML DE LA VERSI√ìN ANTERIOR -->

    <script>
        // =============================================
        // SOLUCI√ìN DEFINITIVA AL PROBLEMA DE GUARDADO
        // =============================================

        // 1. PRIMERO CARGAMOS DESDE localStorage, luego verificamos si hay datos
        function loadDataFromStorage() {
            console.log("üîç Cargando datos desde localStorage...");
            
            // INTENTAR CARGAR ART√çCULOS DESDE LOCALSTORAGE
            const savedArticles = localStorage.getItem('ladoC-articles');
            const savedAuthor = localStorage.getItem('ladoC-author');
            
            let articles = [];
            let authorInfo = {};
            let currentArticleId = 0;
            
            // CARGAR ART√çCULOS
            if (savedArticles && savedArticles !== '[]' && savedArticles !== 'null') {
                try {
                    articles = JSON.parse(savedArticles);
                    console.log(`‚úÖ ${articles.length} art√≠culos cargados desde localStorage`);
                    
                    // Encontrar el ID m√°s alto
                    if (articles.length > 0) {
                        currentArticleId = Math.max(...articles.map(a => parseInt(a.id) || 0));
                        console.log(`üî¢ ID m√°s alto encontrado: ${currentArticleId}`);
                    } else {
                        currentArticleId = 0;
                    }
                } catch (e) {
                    console.error("‚ùå Error al parsear art√≠culos:", e);
                    articles = [];
                    currentArticleId = 0;
                }
            } else {
                console.log("üìù No hay art√≠culos guardados, usando ejemplos");
                // SOLO si NO HAY DATOS, usamos los predeterminados
                articles = [
                    {
                        id: 1,
                        title: "El futuro del socialismo democr√°tico en Catamarca",
                        summary: "Un an√°lisis sobre los desaf√≠os y oportunidades del socialismo democr√°tico en la provincia y su impacto en las pol√≠ticas p√∫blicas locales.",
                        content: "<p>En los √∫ltimos a√±os, Catamarca ha experimentado transformaciones significativas en su escenario pol√≠tico...</p>",
                        category: "Catamarca",
                        author: "Juan P√©rez",
                        date: "15 de noviembre, 2023",
                        image: "https://images.unsplash.com/photo-1513326738677-b964603b136d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1770&q=80",
                        views: 142,
                        featured: true
                    },
                    {
                        id: 2,
                        title: "La desigualdad regional en Argentina: un problema estructural",
                        summary: "Reflexiones sobre las profundas brechas entre las regiones del pa√≠s...",
                        content: "<p>Argentina se presenta al mundo como un pa√≠s unificado...</p>",
                        category: "Pol√≠tica Nacional",
                        author: "Juan P√©rez",
                        date: "8 de noviembre, 2023",
                        image: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1776&q=80",
                        views: 98,
                        featured: true
                    },
                    {
                        id: 3,
                        title: "Juventud y pol√≠tica: el desencanto y la esperanza",
                        summary: "C√≥mo los j√≥venes catamarque√±os perciben la pol√≠tica actual...",
                        content: "<p>En Catamarca, como en el resto del pa√≠s...</p>",
                        category: "Sociedad",
                        author: "Juan P√©rez",
                        date: "1 de noviembre, 2023",
                        image: "https://images.unsplash.com/photo-1523580494863-6f3031224c94?ixlib=rb-4.0.3&auto=format&fit=crop&w=1770&q=80",
                        views: 76,
                        featured: false
                    }
                ];
                currentArticleId = 3;
                
                // Guardar los predeterminados por primera vez
                setTimeout(() => {
                    localStorage.setItem('ladoC-articles', JSON.stringify(articles));
                    console.log("üíæ Art√≠culos predeterminados guardados en localStorage");
                }, 100);
            }
            
            // CARGAR INFORMACI√ìN DEL AUTOR
            if (savedAuthor && savedAuthor !== '{}' && savedAuthor !== 'null') {
                try {
                    authorInfo = JSON.parse(savedAuthor);
                    console.log("‚úÖ Informaci√≥n del autor cargada desde localStorage");
                } catch (e) {
                    console.error("‚ùå Error al parsear autor:", e);
                    authorInfo = getDefaultAuthor();
                }
            } else {
                console.log("üë§ No hay informaci√≥n del autor guardada, usando predeterminada");
                authorInfo = getDefaultAuthor();
                
                // Guardar el autor predeterminado por primera vez
                setTimeout(() => {
                    localStorage.setItem('ladoC-author', JSON.stringify(authorInfo));
                    console.log("üíæ Autor predeterminado guardado en localStorage");
                }, 100);
            }
            
            return { articles, authorInfo, currentArticleId };
        }
        
        function getDefaultAuthor() {
            return {
                name: "Juan P√©rez",
                photo: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=774&q=80",
                quote: "Pensar distinto tambi√©n es un acto de compromiso.",
                bio: "Periodista y polit√≥logo catamarque√±o. Columnista especializado en an√°lisis pol√≠tico desde una perspectiva socialista democr√°tica. Con m√°s de 15 a√±os de experiencia en medios locales y nacionales."
            };
        }
        
        // 2. INICIALIZAR VARIABLES GLOBALES CON LOS DATOS CARGADOS
        const { articles: loadedArticles, authorInfo: loadedAuthor, currentArticleId: loadedCurrentId } = loadDataFromStorage();
        
        let articles = loadedArticles;
        let currentArticleId = loadedCurrentId;
        let authorInfo = loadedAuthor;
        
        console.log(`üìä Estado inicial: ${articles.length} art√≠culos, ID actual: ${currentArticleId}`);
        
        // 3. FUNCI√ìN MEJORADA DE GUARDADO
        function saveToLocalStorage() {
            console.log("üíæ Guardando en localStorage...");
            console.log(`   - Art√≠culos: ${articles.length}`);
            console.log(`   - √öltimo ID: ${currentArticleId}`);
            
            try {
                localStorage.setItem('ladoC-articles', JSON.stringify(articles));
                localStorage.setItem('ladoC-author', JSON.stringify(authorInfo));
                console.log("‚úÖ Datos guardados exitosamente");
                return true;
            } catch (e) {
                console.error("‚ùå Error al guardar en localStorage:", e);
                showNotification('Error al guardar los datos. El navegador puede estar en modo privado.', 'error');
                return false;
            }
        }
        
        // 4. VERIFICAR SI LOCALSTORAGE EST√Å DISPONIBLE
        function isLocalStorageAvailable() {
            try {
                const testKey = '__test__';
                localStorage.setItem(testKey, testKey);
                localStorage.removeItem(testKey);
                return true;
            } catch (e) {
                console.error("‚ùå localStorage no disponible:", e);
                showNotification('El almacenamiento local no est√° disponible. Los cambios no se guardar√°n.', 'error');
                return false;
            }
        }
        
        // 5. RESTANTE DEL C√ìDIGO (SE MANTIENE SIMILAR PERO CON MEJORAS)
        let isAdmin = false;
        const ADMIN_USERNAME = "admin";
        const ADMIN_PASSWORD = "ladoc2023";
        
        let currentSection = 'inicio';
        let currentArchiveFilter = 'all';
        let currentPage = 1;
        const articlesPerPage = 6;
        
        function formatDate() {
            const now = new Date();
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return now.toLocaleDateString('es-ES', options);
        }
        
        function showNotification(message, type = "info") {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // NAVEGACI√ìN MEJORADA
        function showSection(sectionId) {
            currentPage = 1;
            
            // Ocultar todas las secciones
            document.getElementById('inicio-section').style.display = 'none';
            document.querySelectorAll('.category-section').forEach(section => {
                section.style.display = 'none';
                section.classList.remove('active');
            });
            document.getElementById('archivo-section').style.display = 'none';
            document.getElementById('archivo-section').classList.remove('active');
            document.getElementById('contacto-section').style.display = 'none';
            document.getElementById('contacto-section').classList.remove('active');
            document.getElementById('favorites-section').style.display = 'none';
            document.getElementById('favorites-section').classList.remove('active');
            
            const articleFullView = document.getElementById('article-full-view');
            const mainContent = document.querySelector('.main-content');
            if (!articleFullView.classList.contains('hidden')) {
                articleFullView.classList.add('hidden');
                mainContent.classList.remove('hidden');
            }
            
            currentSection = sectionId;
            
            if (sectionId === 'inicio') {
                document.getElementById('inicio-section').style.display = 'block';
                renderArticles();
            } else if (['opinion', 'catamarca', 'politica-nacional', 'sociedad', 'internacionales'].includes(sectionId)) {
                const sectionElement = document.getElementById(`${sectionId}-section`);
                sectionElement.style.display = 'block';
                sectionElement.classList.add('active');
                renderCategoryArticles(sectionId);
            } else if (sectionId === 'archivo') {
                document.getElementById('archivo-section').style.display = 'block';
                document.getElementById('archivo-section').classList.add('active');
                renderFullArchive();
            } else if (sectionId === 'contacto') {
                document.getElementById('contacto-section').style.display = 'block';
                document.getElementById('contacto-section').classList.add('active');
            } else if (sectionId === 'favoritos') {
                document.getElementById('favorites-section').style.display = 'block';
                document.getElementById('favorites-section').classList.add('active');
                renderFavorites();
            }
            
            window.scrollTo(0, 0);
        }
        
        // RENDERIZADO MEJORADO
        function renderArticles() {
            console.log(`üîÑ Renderizando ${articles.length} art√≠culos...`);
            
            const articlesContainer = document.getElementById('articles-container');
            const archiveContainer = document.getElementById('archive-container');
            
            const featuredArticles = articles.filter(article => article.featured);
            const otherArticles = articles.filter(article => !article.featured);
            
            featuredArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
            otherArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            articlesContainer.innerHTML = '';
            archiveContainer.innerHTML = '';
            
            if (featuredArticles.length > 0) {
                featuredArticles.forEach(article => {
                    const articleElement = createArticleElement(article, true);
                    articlesContainer.appendChild(articleElement);
                });
            } else {
                articlesContainer.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--color-gris-medio); padding: 40px;">No hay editoriales destacados a√∫n.</p>';
            }
            
            if (otherArticles.length > 0) {
                renderPaginatedArticles(otherArticles, 'archive-container', false, 'archive-pagination');
            } else {
                archiveContainer.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--color-gris-medio); padding: 40px;">No hay editoriales en el archivo.</p>';
            }
            
            updateStatistics();
        }
        
        function createArticleElement(article, isFeatured) {
            const articleElement = document.createElement('div');
            articleElement.className = `article-card ${isFeatured ? 'highlighted' : ''}`;
            articleElement.dataset.id = article.id;
            
            const isFavorite = localStorage.getItem(`favorite-${article.id}`) === 'true';
            
            articleElement.innerHTML = `
                ${isAdmin ? '<div class="admin-badge">Admin</div>' : ''}
                <img src="${article.image}" alt="${article.title}" class="article-img">
                <div class="article-content">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <h3 class="article-title">${article.title}</h3>
                        <button class="favorite-btn ${isFavorite ? 'active' : ''}" onclick="toggleFavorite(${article.id}); event.stopPropagation()">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="article-meta">
                        <span>${article.date}</span>
                        <span>${article.category}</span>
                        <span>${article.views} lecturas</span>
                    </div>
                    <p class="article-excerpt">${article.summary}</p>
                    <button class="read-more" onclick="viewArticle(${article.id})">Leer m√°s</button>
                    ${isAdmin ? `<div style="margin-top: 10px; display: flex; gap: 10px;">
                        <button class="admin-button warning" style="padding: 5px 10px; font-size: 0.8rem;" onclick="editArticle(${article.id}); event.stopPropagation()">Editar</button>
                        <button class="admin-button danger" style="padding: 5px 10px; font-size: 0.8rem;" onclick="deleteArticle(${article.id}); event.stopPropagation()">Eliminar</button>
                    </div>` : ''}
                </div>
            `;
            
            return articleElement;
        }
        
        // 6. FUNCIONES CR√çTICAS CORREGIDAS
        function saveArticle() {
            console.log("üíæ Guardando art√≠culo...");
            
            if (!isLocalStorageAvailable()) {
                showNotification('No se puede guardar. Verifique las configuraciones del navegador.', 'error');
                return;
            }
            
            const title = document.getElementById('article-title').value;
            const summary = document.getElementById('article-summary').value;
            const content = document.getElementById('article-content').value;
            const category = document.getElementById('article-category').value;
            const image = document.getElementById('article-image').value;
            const author = document.getElementById('article-author').value || authorInfo.name;
            const featured = document.getElementById('article-featured').value === '1';
            const editingId = document.getElementById('editing-article-id').value;
            
            if (!title || !summary || !content) {
                showNotification('Por favor complete todos los campos obligatorios', 'error');
                return;
            }
            
            const finalImage = image || 'https://images.unsplash.com/photo-1588681664899-f142ff2dc9b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1674&q=80';
            
            if (editingId) {
                const articleIndex = articles.findIndex(a => a.id === parseInt(editingId));
                if (articleIndex !== -1) {
                    articles[articleIndex] = {
                        ...articles[articleIndex],
                        title,
                        summary,
                        content,
                        category,
                        image: finalImage,
                        author,
                        featured
                    };
                }
                
                document.getElementById('editing-article-id').value = '';
                document.getElementById('save-article').textContent = 'Guardar Editorial';
                
                showNotification('Editorial actualizado correctamente', 'success');
            } else {
                currentArticleId++;
                const newArticle = {
                    id: currentArticleId,
                    title,
                    summary,
                    content,
                    category,
                    author,
                    date: formatDate(),
                    image: finalImage,
                    views: 0,
                    featured
                };
                
                articles.unshift(newArticle);
                console.log(`‚úÖ Nuevo art√≠culo creado con ID: ${currentArticleId}`);
                showNotification('Editorial creado correctamente', 'success');
            }
            
            // GUARDAR INMEDIATAMENTE
            const saved = saveToLocalStorage();
            
            if (saved) {
                // Actualizar todas las vistas
                if (currentSection === 'inicio') {
                    renderArticles();
                } else if (['opinion', 'catamarca', 'politica-nacional', 'sociedad', 'internacionales'].includes(currentSection)) {
                    renderCategoryArticles(currentSection);
                } else if (currentSection === 'archivo') {
                    renderFullArchive();
                }
                
                updateAdminArticleList();
                
                // Cerrar panel y mostrar cambios
                closeAdminPanel();
                showSection('inicio');
                
                // Limpiar formulario
                document.getElementById('article-title').value = '';
                document.getElementById('article-summary').value = '';
                document.getElementById('article-content').value = '';
                document.getElementById('article-image').value = '';
                document.getElementById('article-author').value = '';
                document.getElementById('article-category').value = 'Opini√≥n';
                document.getElementById('article-featured').value = '0';
            }
        }
        
        function saveAuthor() {
            console.log("üíæ Guardando informaci√≥n del autor...");
            
            const name = document.getElementById('author-name-input').value;
            const photo = document.getElementById('author-photo-input').value;
            const quote = document.getElementById('author-quote-input').value;
            const bio = document.getElementById('author-bio-input').value;
            
            if (!name || !photo || !quote || !bio) {
                showNotification('Por favor complete todos los campos del autor', 'error');
                return;
            }
            
            authorInfo = { name, photo, quote, bio };
            
            // ACTUALIZAR AUTOR EN TODOS LOS ART√çCULOS EXISTENTES
            articles.forEach(article => {
                if (article.author === authorInfo.name || !article.author) {
                    article.author = name;
                }
            });
            
            const saved = saveToLocalStorage();
            
            if (saved) {
                // Actualizar vista p√∫blica
                document.getElementById('author-name').textContent = name;
                document.getElementById('author-photo').src = photo;
                document.getElementById('author-quote').textContent = `"${quote}"`;
                document.getElementById('author-bio').innerHTML = `<p>${bio}</p>`;
                
                // Actualizar tambi√©n el campo de autor en el formulario de art√≠culos
                document.getElementById('article-author').value = name;
                
                // Volver a renderizar para mostrar cambios
                if (currentSection === 'inicio') {
                    renderArticles();
                }
                
                showNotification('Informaci√≥n del autor actualizada correctamente', 'success');
            }
        }
        
        // 7. FUNCI√ìN DE DIAGN√ìSTICO
        function checkDataStatus() {
            console.log("üîç DIAGN√ìSTICO DEL SISTEMA:");
            console.log(`   - Art√≠culos en memoria: ${articles.length}`);
            console.log(`   - CurrentArticleId: ${currentArticleId}`);
            console.log(`   - Art√≠culos en localStorage: ${localStorage.getItem('ladoC-articles') ? JSON.parse(localStorage.getItem('ladoC-articles')).length : 0}`);
            console.log(`   - Autor en memoria: ${authorInfo.name}`);
            console.log(`   - localStorage disponible: ${isLocalStorageAvailable()}`);
            
            // Mostrar IDs de art√≠culos actuales
            console.log("   - IDs de art√≠culos actuales:");
            articles.forEach(article => {
                console.log(`     * ID: ${article.id} - "${article.title}"`);
            });
            
            showNotification(`Sistema cargado: ${articles.length} art√≠culos disponibles`, 'info');
        }
        
        // 8. INICIALIZACI√ìN MEJORADA
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üöÄ Inicializando Lado C...");
            
            // Verificar autenticaci√≥n
            checkAuth();
            
            // Inicializar informaci√≥n del autor en la barra lateral
            document.getElementById('author-name').textContent = authorInfo.name;
            document.getElementById('author-photo').src = authorInfo.photo;
            document.getElementById('author-quote').textContent = `"${authorInfo.quote}"`;
            document.getElementById('author-bio').innerHTML = `<p>${authorInfo.bio}</p>`;
            
            // Configurar color guardado
            const savedColor = localStorage.getItem('ladoC-color');
            if (savedColor) {
                document.documentElement.style.setProperty('--color-bordo', savedColor);
                document.querySelectorAll('.color-option').forEach(option => {
                    option.classList.remove('active');
                    if (option.dataset.color === savedColor) {
                        option.classList.add('active');
                    }
                });
            }
            
            // Configurar t√≠tulo del sitio guardado
            const savedTitle = localStorage.getItem('ladoC-site-title');
            if (savedTitle) {
                document.title = savedTitle;
                document.getElementById('site-title').value = savedTitle;
            }
            
            // Renderizar art√≠culos iniciales
            console.log(`üé® Renderizando ${articles.length} art√≠culos...`);
            renderArticles();
            
            // Ejecutar diagn√≥stico
            setTimeout(checkDataStatus, 500);
            
            // Configurar eventos (igual que antes)
            setupEventListeners();
            
            // Mostrar mensaje de bienvenida
            setTimeout(() => {
                if (!isAdmin) {
                    showNotification('Bienvenido a Lado C - Un medio de opini√≥n pol√≠tica catamarque√±o', 'info');
                }
            }, 1000);
        });
        
        // 9. RESTAURAR DATOS CON SEGURIDAD
        function resetData() {
            if (!confirm("‚ö†Ô∏è ¬øEST√Å SEGURO?\n\nEsta acci√≥n RESTAURAR√Å los datos de ejemplo y PERDER√Å todos los editoriales actuales.\n\n¬øContinuar?")) {
                return;
            }
            
            // Guardar backup por si acaso
            const backup = {
                articles: [...articles],
                authorInfo: {...authorInfo},
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('ladoC-backup', JSON.stringify(backup));
            
            // Restaurar datos de ejemplo
            articles = [
                {
                    id: 1,
                    title: "El futuro del socialismo democr√°tico en Catamarca",
                    summary: "Un an√°lisis sobre los desaf√≠os y oportunidades del socialismo democr√°tico en la provincia...",
                    content: "<p>En los √∫ltimos a√±os, Catamarca ha experimentado transformaciones significativas...</p>",
                    category: "Catamarca",
                    author: "Juan P√©rez",
                    date: "15 de noviembre, 2023",
                    image: "https://images.unsplash.com/photo-1513326738677-b964603b136d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1770&q=80",
                    views: 142,
                    featured: true
                },
                {
                    id: 2,
                    title: "La desigualdad regional en Argentina: un problema estructural",
                    summary: "Reflexiones sobre las profundas brechas entre las regiones del pa√≠s...",
                    content: "<p>Argentina se presenta al mundo como un pa√≠s unificado...</p>",
                    category: "Pol√≠tica Nacional",
                    author: "Juan P√©rez",
                    date: "8 de noviembre, 2023",
                    image: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1776&q=80",
                    views: 98,
                    featured: true
                },
                {
                    id: 3,
                    title: "Juventud y pol√≠tica: el desencanto y la esperanza",
                    summary: "C√≥mo los j√≥venes catamarque√±os perciben la pol√≠tica actual...",
                    content: "<p>En Catamarca, como en el resto del pa√≠s...</p>",
                    category: "Sociedad",
                    author: "Juan P√©rez",
                    date: "1 de noviembre, 2023",
                    image: "https://images.unsplash.com/photo-1523580494863-6f3031224c94?ixlib=rb-4.0.3&auto=format&fit=crop&w=1770&q=80",
                    views: 76,
                    featured: false
                }
            ];
            
            currentArticleId = 3;
            authorInfo = getDefaultAuthor();
            
            // Guardar inmediatamente
            saveToLocalStorage();
            
            // Actualizar vistas
            document.getElementById('author-name').textContent = authorInfo.name;
            document.getElementById('author-photo').src = authorInfo.photo;
            document.getElementById('author-quote').textContent = `"${authorInfo.quote}"`;
            document.getElementById('author-bio').innerHTML = `<p>${authorInfo.bio}</p>`;
            
            renderArticles();
            updateAdminArticleList();
            
            if (isAdmin) {
                logout();
            }
            
            showNotification('‚úÖ Datos restablecidos. Se cre√≥ un backup autom√°tico.', 'success');
        }
        
        // 10. SETUP DE EVENT LISTENERS (simplificado)
        function setupEventListeners() {
            // Logo - Inicio
            document.getElementById('logo').addEventListener('click', function(e) {
                e.preventDefault();
                showSection('inicio');
            });
            
            // Men√∫ principal
            const navItems = {
                'nav-inicio': 'inicio',
                'nav-opinion': 'opinion',
                'nav-catamarca': 'catamarca',
                'nav-politica-nacional': 'politica-nacional',
                'nav-sociedad': 'sociedad',
                'nav-internacionales': 'internacionales',
                'nav-archivo': 'archivo',
                'nav-contacto': 'contacto'
            };
            
            Object.entries(navItems).forEach(([id, section]) => {
                document.getElementById(id).addEventListener('click', function(e) {
                    e.preventDefault();
                    showSection(section);
                });
            });
            
            // Administraci√≥n
            document.getElementById('nav-admin').addEventListener('click', function(e) {
                e.preventDefault();
                if (isAdmin) {
                    openAdminPanel();
                } else {
                    showLoginModal();
                }
            });
            
            // Footer navigation
            document.querySelectorAll('#footer-section a[id^="footer-"]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.id.replace('footer-', '');
                    showSection(sectionId);
                });
            });
            
            // Botones cr√≠ticos
            document.getElementById('save-article').addEventListener('click', saveArticle);
            document.getElementById('save-author').addEventListener('click', saveAuthor);
            document.getElementById('reset-data').addEventListener('click', resetData);
            
            // [EL RESTO DE EVENT LISTENERS SE MANTIENE IGUAL]
        }
        
        // [LAS DEM√ÅS FUNCIONES SE MANTIENEN SIMILARES A LA VERSI√ìN ANTERIOR]
        // Solo se muestran las funciones cr√≠ticas para la soluci√≥n
        
    </script>
</body>
</html>
